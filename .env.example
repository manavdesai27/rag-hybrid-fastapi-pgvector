# Copy this file to .env and fill in your real values where needed.
# .env is ignored by git (see .gitignore). Do NOT commit secrets.

# =========================
# Required
# =========================
# OpenAI API key used by embeddings and generation
OPENAI_API_KEY=sk-your-openai-key

# =========================
# Models
# =========================
OPENAI_MODEL=gpt-4o-mini
# 1536 dims
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# =========================
# Data stores
# =========================
# Matches docker-compose service names (db, redis)
DATABASE_URL=postgresql+psycopg2://rag_user:rag_pass@db:5432/rag_db
REDIS_URL=redis://redis:6379/0
CACHE_TTL_SECONDS=600

# =========================
# Ingestion
# =========================
DOCS_SEED_URLS=https://docs.stripe.com/api,https://docs.stripe.com/payments
MAX_DOCS=30
CHUNK_SIZE=800
CHUNK_OVERLAP=150

# =========================
# Retrieval / Generation
# =========================
TOP_K=8
RERANKER_ENABLED=false
RERANKER_MODEL_NAME=BAAI/bge-reranker-base
RERANKER_TOPN=40
REFUSAL_MIN_SIMILARITY=0.72
MAX_OUTPUT_TOKENS=350

# =========================
# Observability (optional)
# =========================
LANGFUSE_HOST=
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=

# =========================
# Evals (scaffold)
# =========================
EVAL_API_BASE_URL=http://localhost:8000
EVAL_DATASET_PATH=data/evals/stripe_seed.jsonl
EVAL_MIN_FAITHFULNESS=0.6
EVAL_MIN_ANSWER_RELEVANCY=0.6
EVAL_MIN_CONTEXT_PRECISION=0.4
EVAL_MIN_CONTEXT_RECALL=0.4

# =========================
# Rate limiting
# =========================
RATE_LIMIT_PER_MINUTE=20
RATE_LIMIT_BURST_5S=5
RATE_LIMIT_PER_DAY=500
RATE_LIMIT_PER_QUESTION_INTERVAL_SECONDS=5
MAX_CONCURRENCY=8
PER_IP_MAX_CONCURRENCY=2
MAX_QUEUE_SIZE=50
TRUST_X_FORWARDED_FOR=true
REAL_IP_HEADER=X-Forwarded-For

# =========================
# Runtime hints
# =========================
# Set to 1 inside containers if desired; 0 for local dev
RUNNING_IN_DOCKER=0

# =========================
# UI
# =========================
# When running UI locally (outside compose), point to local API
API_BASE_URL=http://localhost:8000
